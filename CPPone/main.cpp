#include <iostream>
#include "Image.h"
#include "Commons.h"
#include "ppm.h"
#include "Color.h"

#include <fstream>
#include <sstream>
#include <istream>
#include <vector>
#include <cstring>

using namespace std;
using namespace imaging;
using namespace commons;


int main()
{
	
	// 0) DONE Το όνομα του εκτελέσιμου πρέπει να είναι neg.exe 
	//     το όνομα της εικόνας προς φόρτωση δίνεται ως όρισμα, αλλιώς ζητείται κατά την εκτέλεση
	// 1a) readPPM --> ανοίγει την εικόνα και και την αποθηκεύει σε ένα instance της κλάσης Image
	//     μετατρέπει τα εύρη [0,255] σε [0.0,1.0]
	//     να διαβάζει την κεφαλίδα της εικόνας, υποθέτωντας πως δεν υπάρχουν σχόλια ενδιάμεσα
	//     σφάλματα που μπορεί να προκύψουν, πρέπει να διαχειριστούν:
	//        - δεν υπάρχει το αρχείο που προσπαθούμε να ανοίξουμε ή δεν ανοίγει
	//        - δεν είναι τύπου P6
	//        - λείπει η οριζόντια ή/και η κάθετη διάσταση της εικόνας
	//        - απέτυχε να διαβαστεί η μέγιστη τιμή αποθήκευσης ή είναι μεγαλύτερη του 255
	// 1b) το πρόγραμμα επιστρέφει τις διαστάσεις της εικόνας και το αρνητικό της 
	//	   η αρνητική τιμή ενός πίξελ υπολογίζεται ως Negt(Pixel(x,y))=(1,1,1)-Pixel(x,y)
	// 1c) writePPM --> αποθηκεύει την εικόνα σε νέο αρχείο ppm, με επίθεμα	_neg (i.e, photo1_neg.ppm)
	// 1d) οι άνω 2 μέθοδοι να υλοποιηθούν στο ppm.cpp και να πακεταριστούν στο ppm.lib
	// 
	// 2) Υλοποίηση των μεθόδων της κλάσσης Image. H load να χρησιμοποιεί την readPPM, και η save την writePPM από την ppm.lib
	// 3) Υλοποίηση της main λειτουργικότητας στο 1, με χρήση της ppm.lib.
	
	string i;
	Commons cm;
	cout << "Please enter the full name (with extension) of the ppm image: ";
	cin >> i;
	cout << "File entered: " << i << "\n";
	int * w = NULL;
	int * h = NULL;
	ReadPPM(cm.stringToChar(i), w, h);

	return 0;
}